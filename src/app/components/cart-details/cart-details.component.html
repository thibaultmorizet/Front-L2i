<div class="general-content">
  <app-header [cartLength]="cart.length"></app-header>

  <main id="content">
    <div class="container">
     <div class="cart-details-general">

      <p class="cart-title">Your cart total is {{ cartTotalPriceTtc }} €</p>
      <p-divider></p-divider>
        <div *ngFor="let elt of cart">
          <div class="cart-details">
            <a [routerLink]="['/books/' + elt.id]">
              <img src="{{ elt.image }}" alt="" class="img-icon"
            /></a>
            <div class="cart-details-info">
              <div class="cart-details-title-quantity-price">
                <p class="cart-details-title">
                  <a [routerLink]="['/books/' + elt.id]"> {{ elt.title }}</a>
                </p>
                <div class="cart-details-quantity-price">
                  <p-inputNumber
                    [showButtons]="true"
                    buttonLayout="horizontal"
                    inputId="horizontal"
                    spinnerMode="horizontal"
                    [allowEmpty]="false"
                    [step]="1"
                    [(ngModel)]="elt.number_ordered"
                    [min]="1"
                    [max]="elt.stock ? elt.stock : 0"
                    decrementButtonClass="p-button-outline-primary"
                    incrementButtonClass="p-button-outline-primary"
                    incrementButtonIcon="pi pi-plus"
                    decrementButtonIcon="pi pi-minus"
                    (onInput)="updateQuantity(elt.id, $event.value)"
                  >
                  </p-inputNumber>
                  <div class="cart-details-price-remove">
                    <p class="cart-details-price">
                      {{ elt.unitpricettc }} € (TTC)
                    </p>
                    <p
                      class="cart-details-remove"
                      (click)="deleteBookOfCart(elt.id)"
                    >
                      Remove
                    </p>
                  </div>
                </div>
              </div>
              <div class="cart-details-minor-info">
                <p>
                  <i class="pi pi-send"></i
                  ><span
                    >Delivery by
                    <span class="bold"> {{ deliveryDate }}.</span></span
                  >
                </p>
                <p *ngIf="elt.stock && elt.stock <= 10">
                  <i class="pi pi-exclamation-triangle"></i
                  ><span
                    >Only
                    <span class="bold">{{ elt.stock }}</span> Available.</span
                  >
                </p>
              </div>
            </div>
          </div>
          <p-divider class="cart-details-divider"></p-divider>
        </div>
        <div class="cart-details-total-subtotal">
          <div class="cart-details-subtotal">
            <div>
              <p>Subtotal (TTC)</p>
              <p>{{ cartTotalPriceTtc }} €</p>
            </div>
            <!-- <div>
            <p>Subtotal (HT)</p>
            <p>{{ cartTotalPriceHt }} €</p>
          </div> -->
            <div>
              <p>Delivery taxes</p>
              <p>Free</p>
            </div>
            <p-divider class="cart-details-divider"></p-divider>
          </div>

          <div class="cart-details-total">
            <div>
              <p>Total</p>
              <p>{{ cartTotalPriceTtc }} €</p>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-end mt-2">
          <button
            pButton
            pRipple
            type="submit"
            class="p-button-raised p-button-primary-color btn-primary-color"
          >
            Check out
          </button>
        </div>
      </div>
      <!--       <div class="row">
        <h1>Mon Panier</h1>
        <table class="mb-5">
          <thead>
            <th></th>
            <th>Produit</th>
            <th>Prix</th>
            <th>Quantité</th>
            <th>Total</th>
            <th></th>
          </thead>
          <tbody *ngFor="let elt of cart">
            <td>
              <a [routerLink]="['/books/', elt.id]">
                <img src="{{ elt.image }}" alt="" class="img-icon"
              /></a>
            </td>
            <td>
              <a [routerLink]="['/books/', elt.id]"> {{ elt.title }}</a>
            </td>
            <td>
              {{ elt.unitpricettc }}
            </td>
            <td>
              <span class="d-flex align-items-center">
                <button
                  (click)="decreaseBookQuantity(elt.id)"
                  type="button"
                  aria-label="Diminuer"
                  class="page-link modify-quantity-button"
                >
                  <span aria-hidden="true"><</span>
                </button>
                <span class="mx-2">
                  {{ elt.number_ordered }}
                </span>
                <button
                  (click)="increaseBookQuantity(elt.id)"
                  type="button"
                  aria-label="Augmenter"
                  class="page-link modify-quantity-button"
                >
                  <span aria-hidden="true">></span>
                </button></span
              >
            </td>
            <td>{{ elt.totalprice }}</td>
            <td>
              <button
                class="btn btn-danger border-0 border-radius-5px"
                (click)="deleteBookOfCart(elt.id)"
              >
                <span
                  data-toggle="tooltip"
                  data-placement="top"
                  data-boundary="window"
                  title="Supprimer"
                >
                  <i class="fa fa-times-circle"></i
                ></span>
              </button>
            </td>
          </tbody>
        </table>

        <div class="d-flex justify-content-end px-5 mb-3">
          <div>Total général : {{ cartTotalPriceTtc }}</div>
        </div>
        <div class="d-flex justify-content-end px-5">
          <button class="btn btn-success border-0 border-radius-5px">
            Valider la commande
          </button>
        </div>
      </div>
 -->
    </div>
  </main>
  <app-footer></app-footer>
</div>
