<header>
  <div id="top">
    <div class="container">
      <div class="row">
        <div class="col-lg-6 offer mb-3 mb-lg-0 d-flex align-items-center">
          <a [routerLink]="['/books']" class="fa-2x home-link pointer">L2i</a>
        </div>
        <div class="col-lg-6 d-flex justify-content-end align-items-center">
          <ul class="menu list-inline mb-0 mx-3">
            <!-- <li class="list-inline-item">
                <a href="#" data-toggle="modal" data-target="#login-modal"
                  >Login</a
                >
              </li> -->
            <li
              class="list-inline-item pointer"
              *ngIf="
                connectedUser != null &&
                this.connectedUser?.roles?.includes('ROLE_ADMIN')
              "
            >
              <a [routerLink]="['/admin-home']">Paramètre Admin</a>
            </li>
            <li class="list-inline-item pointer" *ngIf="connectedUser != null">
              <a [routerLink]="['/my-account']">Mon Profil</a>
            </li>
            <li class="list-inline-item pointer" *ngIf="connectedUser != null">
              <a (click)="logout()">Deconnexion</a>
            </li>
          </ul>

          <div id="bag-shopping-count-container">
            <a [routerLink]="['/basket']">
              <span id="bag-shopping-count" aria-hidden="true">{{
                basket.length
              }}</span>
              <i class="fa-solid fa-bag-shopping fa-2x text-white"></i
            ></a>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
<div id="content">
  <div class="container">
    <div class="row">
      <div id="personnalData" class="my-3">
        <div class="container d-flex justify-content-end">
          <form
            #personnalDataForm="ngForm"
            role="personnalData"
            (ngSubmit)="setNewPersonnalData()"
          >
            <div class="input-group">
              <input
                type="text"
                placeholder="{{ connectedUser?.firstname }}"
                class="form-control"
                value="{{ connectedUser?.firstname }}"
                [(ngModel)]="newUserData.firstname"
                name="Firstname"
              />
            </div>
            <div class="input-group">
              <input
                type="text"
                placeholder="{{ connectedUser?.lastname }}"
                class="form-control"
                value="{{ connectedUser?.lastname }}"
                [(ngModel)]="newUserData.lastname"
                name="Lastname"
              />
            </div>
            <div class="input-group">
              <input
                type="text"
                class="form-control"
                value="{{ connectedUser?.email }}"
                name="Email"
                disabled
              />
            </div>
            <div class="input-group">
              <input
                type="password"
                placeholder="Insérez votre nouveau mot de passe"
                class="form-control"
                value=""
                [(ngModel)]="newUserData.password"
                name="Password"
              />
            </div>
            <div *ngIf="errorPassword" class="mb-2 text-danger">
              {{ errorPassword }}
            </div>
            <div class="input-group">
              <input
                type="password"
                placeholder="Confirmez votre nouveau mot de passe"
                class="form-control"
                value=""
                [(ngModel)]="newUserData.passwordConfirm"
                name="PasswordConfirm"
              />
            </div>
            <button
              type="submit"
              class="btn btn-primary button-update-personnal-data h-100"
            >
              Modifier
            </button>
          </form>

          <form
            #AddressBillingForm="ngForm"
            role="AddressBilling"
            (ngSubmit)="setNewAddressBilling()"
          >
            <label for="Street">Rue</label>
            <div class="input-group">
              <input
                type="text"
                placeholder="{{ connectedUser?.billing_address?.street }}"
                class="form-control"
                value="{{ connectedUser?.billing_address?.street }}"
                [(ngModel)]="newAddressBilling.street"
                name="Street"
                required
              />
            </div>

            <label for="Postalcode">Code postal</label>
            <div class="input-group">
              <input
                type="text"
                placeholder="{{ connectedUser?.billing_address?.postalcode }}"
                class="form-control"
                value="{{ connectedUser?.billing_address?.postalcode }}"
                [(ngModel)]="newAddressBilling.postalcode"
                name="Postalcode"
                required
              />
            </div>

            <label for="City">Ville</label>
            <div class="input-group">
              <input
                type="text"
                placeholder="{{ connectedUser?.billing_address?.city }}"
                class="form-control"
                value="{{ connectedUser?.billing_address?.city }}"
                [(ngModel)]="newAddressBilling.city"
                name="City"
                required
              />
            </div>
            <label for="Country">Pays</label>
            <div class="input-group">
              <input
                type="text"
                placeholder="{{ connectedUser?.billing_address?.country }}"
                class="form-control"
                value="{{ connectedUser?.billing_address?.country }}"
                [(ngModel)]="newAddressBilling.country"
                name="Country"
                required
              />
            </div>

            <button
              type="submit"
              class="btn btn-primary button-update-billing-address h-100"
              [disabled]="!AddressBillingForm.valid"
            >
              Modifier
            </button>
          </form>

          <form
            #AddressDeliveryForm="ngForm"
            role="AddressDelivery"
            (ngSubmit)="setNewAddressDelivery()"
          >

            <label for="Street">Rue</label>
            <div class="input-group">
              <input
                type="text"
                placeholder="{{ connectedUser?.delivery_address?.street }}"
                class="form-control"
                value="{{ connectedUser?.delivery_address?.street }}"
                [(ngModel)]="newAddressDelivery.street"
                name="Street"
                required
              />
            </div>

            <label for="Postalcode">Code postal</label>
            <div class="input-group">
              <input
                type="text"
                placeholder="{{ connectedUser?.delivery_address?.postalcode }}"
                class="form-control"
                value="{{ connectedUser?.delivery_address?.postalcode }}"
                [(ngModel)]="newAddressDelivery.postalcode"
                name="Postalcode"
                required
              />
            </div>

            <label for="City">Ville</label>
            <div class="input-group">
              <input
                type="text"
                placeholder="{{ connectedUser?.delivery_address?.city }}"
                class="form-control"
                value="{{ connectedUser?.delivery_address?.city }}"
                [(ngModel)]="newAddressDelivery.city"
                name="City"
                required
              />
            </div>

            <label for="Country">Pays</label>
            <div class="input-group">
              <input
                type="text"
                placeholder="{{ connectedUser?.delivery_address?.country }}"
                class="form-control"
                value="{{ connectedUser?.delivery_address?.country }}"
                [(ngModel)]="newAddressDelivery.country"
                name="Country"
                required
              />
            </div>

            <button
              type="submit"
              class="btn btn-primary button-update-delivery-address h-100"
              [disabled]="!AddressDeliveryForm.valid"
            >
              Modifier
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
